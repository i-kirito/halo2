import{ba as M,a as ee,bb as K,bc as Te,bd as Ht,q as V,N as B,e as Re,C as Ce,g as vt,p as J,be as Ne,bf as ke,h as Y,bg as ie,a2 as Ae,i as Ve,bh as re,S as Be,X as Me,b0 as Oe,bi as De,bj as Ee,O as Z,bk as He,bl as lt,bm as Ge,U as Gt,bn as ze,c as Fe,n as Ue,bo as je,bp as qe,bq as Ze,br as Xe,bs as Ke,bt as Ye,bu as $e,bv as ne,bw as Pt,bx as We,by as Je,bz as Qe,l as ti,o as ae,bA as U,bB as ei,K as ii,_ as ri,bC as se,B as st,H as wt,F as ni,ax as ai,bD as oe,a0 as si,bE as oi,bF as fi,bG as hi,bH as ot,A as vi,I as ui,z as li,r as ft,bI as di,j as ci}from"./graphic-083f2b2f.js";var yt=Math.sin,mt=Math.cos,fe=Math.PI,D=Math.PI*2,_i=180/fe,pi=function(){function r(){}return r.prototype.reset=function(t){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,t||4)},r.prototype.moveTo=function(t,e){this._add("M",t,e)},r.prototype.lineTo=function(t,e){this._add("L",t,e)},r.prototype.bezierCurveTo=function(t,e,i,n,a,s){this._add("C",t,e,i,n,a,s)},r.prototype.quadraticCurveTo=function(t,e,i,n){this._add("Q",t,e,i,n)},r.prototype.arc=function(t,e,i,n,a,s){this.ellipse(t,e,i,i,0,n,a,s)},r.prototype.ellipse=function(t,e,i,n,a,s,f,o){var v=f-s,u=!o,h=Math.abs(v),l=M(h-D)||(u?v>=D:-v>=D),c=v>0?v%D:v%D+D,_=!1;l?_=!0:M(h)?_=!1:_=c>=fe==!!u;var d=t+i*mt(s),p=e+n*yt(s);this._start&&this._add("M",d,p);var y=Math.round(a*_i);if(l){var g=1/this._p,m=(u?1:-1)*(D-g);this._add("A",i,n,y,1,+u,t+i*mt(s+m),e+n*yt(s+m)),g>.01&&this._add("A",i,n,y,0,+u,d,p)}else{var x=t+i*mt(f),C=e+n*yt(f);this._add("A",i,n,y,+_,+u,x,C)}},r.prototype.rect=function(t,e,i,n){this._add("M",t,e),this._add("l",i,0),this._add("l",0,n),this._add("l",-i,0),this._add("Z")},r.prototype.closePath=function(){this._d.length>0&&this._add("Z")},r.prototype._add=function(t,e,i,n,a,s,f,o,v){for(var u=[],h=this._p,l=1;l<arguments.length;l++){var c=arguments[l];if(isNaN(c)){this._invalid=!0;return}u.push(Math.round(c*h)/h)}this._d.push(t+u.join(" ")),this._start=t==="Z"},r.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},r.prototype.getStr=function(){return this._str},r}();const he=pi;var X="none",gi=Math.round;function yi(r){var t=r.fill;return t!=null&&t!==X}function mi(r){var t=r.stroke;return t!=null&&t!==X}var Lt=["lineCap","miterLimit","lineJoin"],xi=V(Lt,function(r){return"stroke-"+r.toLowerCase()});function bi(r,t,e,i){var n=t.opacity==null?1:t.opacity;if(e instanceof ee){r("opacity",n);return}if(yi(t)){var a=K(t.fill);r("fill",a.color);var s=t.fillOpacity!=null?t.fillOpacity*a.opacity*n:a.opacity*n;(i||s<1)&&r("fill-opacity",s)}else r("fill",X);if(mi(t)){var f=K(t.stroke);r("stroke",f.color);var o=t.strokeNoScale?e.getLineScale():1,v=o?(t.lineWidth||0)/o:0,u=t.strokeOpacity!=null?t.strokeOpacity*f.opacity*n:f.opacity*n,h=t.strokeFirst;if((i||v!==1)&&r("stroke-width",v),(i||h)&&r("paint-order",h?"stroke":"fill"),(i||u<1)&&r("stroke-opacity",u),t.lineDash){var l=Te(e),c=l[0],_=l[1];c&&(_=gi(_||0),r("stroke-dasharray",c.join(",")),(_||i)&&r("stroke-dashoffset",_))}else i&&r("stroke-dasharray",X);for(var d=0;d<Lt.length;d++){var p=Lt[d];if(i||t[p]!==Ht[p]){var y=t[p]||Ht[p];y&&r(xi[d],y)}}}else i&&r("stroke",X)}var ve="http://www.w3.org/2000/svg",ue="http://www.w3.org/1999/xlink",wi="http://www.w3.org/2000/xmlns/",Li="http://www.w3.org/XML/1998/namespace";function le(r){return document.createElementNS(ve,r)}function S(r,t,e,i,n){return{tag:r,attrs:e||{},children:i,text:n,key:t}}function Ii(r,t){var e=[];if(t)for(var i in t){var n=t[i],a=i;n!==!1&&(n!==!0&&n!=null&&(a+='="'+n+'"'),e.push(a))}return"<"+r+" "+e.join(" ")+">"}function Si(r){return"</"+r+">"}function Tt(r,t){t=t||{};var e=t.newline?`
`:"";function i(n){var a=n.children,s=n.tag,f=n.attrs,o=n.text;return Ii(s,f)+(s!=="style"?Re(o):o||"")+(a?""+e+V(a,function(v){return i(v)}).join(e)+e:"")+Si(s)}return i(r)}function Pi(r,t,e){e=e||{};var i=e.newline?`
`:"",n=" {"+i,a=i+"}",s=V(B(r),function(o){return o+n+V(B(r[o]),function(v){return v+":"+r[o][v]+";"}).join(i)+a}).join(i),f=V(B(t),function(o){return"@keyframes "+o+n+V(B(t[o]),function(v){return v+n+V(B(t[o][v]),function(u){var h=t[o][v][u];return u==="d"&&(h='path("'+h+'")'),u+":"+h+";"}).join(i)+a}).join(i)+a}).join(i);return!s&&!f?"":["<![CDATA[",s,f,"]]>"].join(i)}function It(r){return{zrId:r,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssClassIdx:0,cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function zt(r,t,e,i){return S("svg","root",{width:r,height:t,xmlns:ve,"xmlns:xlink":ue,version:"1.1",baseProfile:"full",viewBox:i?"0 0 "+r+" "+t:!1},e)}var Ft={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},H="transform-origin";function Ti(r,t,e){var i=Y({},r.shape);Y(i,t),r.buildPath(e,i);var n=new he;return n.reset(re(r)),e.rebuildPath(n,1),n.generateStr(),n.getStr()}function Ri(r,t){var e=t.originX,i=t.originY;(e||i)&&(r[H]=e+"px "+i+"px")}var Ci={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function de(r,t){var e=t.zrId+"-ani-"+t.cssAnimIdx++;return t.cssAnims[e]=r,e}function Ni(r,t,e){var i=r.shape.paths,n={},a,s;if(vt(i,function(o){var v=It(e.zrId);v.animation=!0,dt(o,{},v,!0);var u=v.cssAnims,h=v.cssNodes,l=B(u),c=l.length;if(c){s=l[c-1];var _=u[s];for(var d in _){var p=_[d];n[d]=n[d]||{d:""},n[d].d+=p.d||""}for(var y in h){var g=h[y].animation;g.indexOf(s)>=0&&(a=g)}}}),!!a){t.d=!1;var f=de(n,e);return a.replace(s,f)}}function Ut(r){return J(r)?Ft[r]?"cubic-bezier("+Ft[r]+")":Ne(r)?r:"":""}function dt(r,t,e,i){var n=r.animators,a=n.length,s=[];if(r instanceof Ce){var f=Ni(r,t,e);if(f)s.push(f);else if(!a)return}else if(!a)return;for(var o={},v=0;v<a;v++){var u=n[v],h=[u.getMaxTime()/1e3+"s"],l=Ut(u.getClip().easing),c=u.getDelay();l?h.push(l):h.push("linear"),c&&h.push(c/1e3+"s"),u.getLoop()&&h.push("infinite");var _=h.join(" ");o[_]=o[_]||[_,[]],o[_][1].push(u)}function d(g){var m=g[1],x=m.length,C={},N={},b={},I="animation-timing-function";function P(tt,et,Mt){for(var it=tt.getTracks(),Pe=tt.getMaxTime(),_t=0;_t<it.length;_t++){var pt=it[_t];if(pt.needsAnimate()){var Ot=pt.keyframes,rt=pt.propName;if(Mt&&(rt=Mt(rt)),rt)for(var gt=0;gt<Ot.length;gt++){var nt=Ot[gt],at=Math.round(nt.time/Pe*100)+"%",Dt=Ut(nt.easing),Et=nt.rawValue;(J(Et)||Be(Et))&&(et[at]=et[at]||{},et[at][rt]=nt.rawValue,Dt&&(et[at][I]=Dt))}}}}for(var w=0;w<x;w++){var R=m[w],T=R.targetName;T?T==="shape"&&P(R,N):!i&&P(R,C)}for(var L in C){var k={};ke(k,r),Y(k,C[L]);var j=ie(k),O=C[L][I];b[L]=j?{transform:j}:{},Ri(b[L],k),O&&(b[L][I]=O)}var z,kt=!0;for(var L in N){b[L]=b[L]||{};var At=!z,O=N[L][I];At&&(z=new Ae);var we=z.len();z.reset(),b[L].d=Ti(r,N[L],z);var Le=z.len();if(!At&&we!==Le){kt=!1;break}O&&(b[L][I]=O)}if(!kt)for(var L in b)delete b[L].d;if(!i)for(var w=0;w<x;w++){var R=m[w],T=R.targetName;T==="style"&&P(R,b,function(it){return Ci[it]})}for(var Q=B(b),Vt=!0,ct,w=1;w<Q.length;w++){var Bt=Q[w-1],Ie=Q[w];if(b[Bt][H]!==b[Ie][H]){Vt=!1;break}ct=b[Bt][H]}if(Vt&&ct){for(var L in b)b[L][H]&&delete b[L][H];t[H]=ct}if(Ve(Q,function(tt){return B(b[tt]).length>0}).length){var Se=de(b,e);return Se+" "+g[0]+" both"}}for(var p in o){var f=d(o[p]);f&&s.push(f)}if(s.length){var y=e.zrId+"-cls-"+e.cssClassIdx++;e.cssNodes["."+y]={animation:s.join(",")},t.class=y}}var $=Math.round;function ce(r){return r&&J(r.src)}function _e(r){return r&&Ue(r.toDataURL)}function Rt(r,t,e,i){bi(function(n,a){var s=n==="fill"||n==="stroke";s&&ne(a)?ge(t,r,n,i):s&&Pt(a)?ye(e,r,n,i):r[n]=a},t,e,!1),Di(e,r,i)}function jt(r){return M(r[0]-1)&&M(r[1])&&M(r[2])&&M(r[3]-1)}function ki(r){return M(r[4])&&M(r[5])}function Ct(r,t,e){if(t&&!(ki(t)&&jt(t))){var i=e?10:1e4;r.transform=jt(t)?"translate("+$(t[4]*i)/i+" "+$(t[5]*i)/i+")":We(t)}}function qt(r,t,e){for(var i=r.points,n=[],a=0;a<i.length;a++)n.push($(i[a][0]*e)/e),n.push($(i[a][1]*e)/e);t.points=n.join(" ")}function Zt(r){return!r.smooth}function Ai(r){var t=V(r,function(e){return typeof e=="string"?[e,e]:e});return function(e,i,n){for(var a=0;a<t.length;a++){var s=t[a],f=e[s[0]];f!=null&&(i[s[1]]=$(f*n)/n)}}}var Vi={circle:[Ai(["cx","cy","r"])],polyline:[qt,Zt],polygon:[qt,Zt]};function Bi(r){for(var t=r.animators,e=0;e<t.length;e++)if(t[e].targetName==="shape")return!0;return!1}function pe(r,t){var e=r.style,i=r.shape,n=Vi[r.type],a={},s=t.animation,f="path",o=r.style.strokePercent,v=t.compress&&re(r)||4;if(n&&!t.willUpdate&&!(n[1]&&!n[1](i))&&!(s&&Bi(r))&&!(o<1)){f=r.type;var u=Math.pow(10,v);n[0](i,a,u)}else{var h=!r.path||r.shapeChanged();r.path||r.createPathProxy();var l=r.path;h&&(l.beginPath(),r.buildPath(l,r.shape),r.pathUpdated());var c=l.getVersion(),_=r,d=_.__svgPathBuilder;(_.__svgPathVersion!==c||!d||o!==_.__svgPathStrokePercent)&&(d||(d=_.__svgPathBuilder=new he),d.reset(v),l.rebuildPath(d,o),d.generateStr(),_.__svgPathVersion=c,_.__svgPathStrokePercent=o),a.d=d.getStr()}return Ct(a,r.transform),Rt(a,e,r,t),t.animation&&dt(r,a,t),S(f,r.id+"",a)}function Mi(r,t){var e=r.style,i=e.image;if(i&&!J(i)&&(ce(i)?i=i.src:_e(i)&&(i=i.toDataURL())),!!i){var n=e.x||0,a=e.y||0,s=e.width,f=e.height,o={href:i,width:s,height:f};return n&&(o.x=n),a&&(o.y=a),Ct(o,r.transform),Rt(o,e,r,t),t.animation&&dt(r,o,t),S("image",r.id+"",o)}}function Oi(r,t){var e=r.style,i=e.text;if(i!=null&&(i+=""),!(!i||isNaN(e.x)||isNaN(e.y))){var n=e.font||je,a=e.x||0,s=qe(e.y||0,Ze(n),e.textBaseline),f=Xe[e.textAlign]||e.textAlign,o={"dominant-baseline":"central","text-anchor":f};if(Ke(e)){var v="",u=e.fontStyle,h=Ye(e.fontSize);if(!parseFloat(h))return;var l=e.fontFamily||$e,c=e.fontWeight;v+="font-size:"+h+";font-family:"+l+";",u&&u!=="normal"&&(v+="font-style:"+u+";"),c&&c!=="normal"&&(v+="font-weight:"+c+";"),o.style=v}else o.style="font: "+n;return i.match(/\s/)&&(o["xml:space"]="preserve"),a&&(o.x=a),s&&(o.y=s),Ct(o,r.transform),Rt(o,e,r,t),t.animation&&dt(r,o,t),S("text",r.id+"",o,void 0,i)}}function Xt(r,t){if(r instanceof Me)return pe(r,t);if(r instanceof ee)return Mi(r,t);if(r instanceof Oe)return Oi(r,t)}function Di(r,t,e){var i=r.style;if(Je(i)){var n=Qe(r),a=e.shadowCache,s=a[n];if(!s){var f=r.getGlobalScale(),o=f[0],v=f[1];if(!o||!v)return;var u=i.shadowOffsetX||0,h=i.shadowOffsetY||0,l=i.shadowBlur,c=K(i.shadowColor),_=c.opacity,d=c.color,p=l/2/o,y=l/2/v,g=p+" "+y;s=e.zrId+"-s"+e.shadowIdx++,e.defs[s]=S("filter",s,{id:s,x:"-100%",y:"-100%",width:"300%",height:"300%"},[S("feDropShadow","",{dx:u/o,dy:h/v,stdDeviation:g,"flood-color":d,"flood-opacity":_})]),a[n]=s}t.filter=lt(s)}}function ge(r,t,e,i){var n=r[e],a,s={gradientUnits:n.global?"userSpaceOnUse":"objectBoundingBox"};if(De(n))a="linearGradient",s.x1=n.x,s.y1=n.y,s.x2=n.x2,s.y2=n.y2;else if(Ee(n))a="radialGradient",s.cx=Z(n.x,.5),s.cy=Z(n.y,.5),s.r=Z(n.r,.5);else return;for(var f=n.colorStops,o=[],v=0,u=f.length;v<u;++v){var h=He(f[v].offset)*100+"%",l=f[v].color,c=K(l),_=c.color,d=c.opacity,p={offset:h};p["stop-color"]=_,d<1&&(p["stop-opacity"]=d),o.push(S("stop",v+"",p))}var y=S(a,"",s,o),g=Tt(y),m=i.gradientCache,x=m[g];x||(x=i.zrId+"-g"+i.gradientIdx++,m[g]=x,s.id=x,i.defs[x]=S(a,x,s,o)),t[e]=lt(x)}function ye(r,t,e,i){var n=r.style[e],a=r.getBoundingRect(),s={},f=n.repeat,o=f==="no-repeat",v=f==="repeat-x",u=f==="repeat-y",h;if(Ge(n)){var l=n.imageWidth,c=n.imageHeight,_=void 0,d=n.image;if(J(d)?_=d:ce(d)?_=d.src:_e(d)&&(_=d.toDataURL()),typeof Image>"u"){var p="Image width/height must been given explictly in svg-ssr renderer.";Gt(l,p),Gt(c,p)}else if(l==null||c==null){var y=function(w,R){if(w){var T=w.elm,L=l||R.width,k=c||R.height;w.tag==="pattern"&&(v?(k=1,L/=a.width):u&&(L=1,k/=a.height)),w.attrs.width=L,w.attrs.height=k,T&&(T.setAttribute("width",L),T.setAttribute("height",k))}},g=ze(_,null,r,function(w){o||y(N,w),y(h,w)});g&&g.width&&g.height&&(l=l||g.width,c=c||g.height)}h=S("image","img",{href:_,width:l,height:c}),s.width=l,s.height=c}else n.svgElement&&(h=Fe(n.svgElement),s.width=n.svgWidth,s.height=n.svgHeight);if(h){var m,x;o?m=x=1:v?(x=1,m=s.width/a.width):u?(m=1,x=s.height/a.height):s.patternUnits="userSpaceOnUse",m!=null&&!isNaN(m)&&(s.width=m),x!=null&&!isNaN(x)&&(s.height=x);var C=ie(n);C&&(s.patternTransform=C);var N=S("pattern","",s,[h]),b=Tt(N),I=i.patternCache,P=I[b];P||(P=i.zrId+"-p"+i.patternIdx++,I[b]=P,s.id=P,N=i.defs[P]=S("pattern",P,s,[h])),t[e]=lt(P)}}function Ei(r,t,e){var i=e.clipPathCache,n=e.defs,a=i[r.id];if(!a){a=e.zrId+"-c"+e.clipPathIdx++;var s={id:a};i[r.id]=a,n[a]=S("clipPath",a,s,[pe(r,e)])}t["clip-path"]=lt(a)}function Kt(r){return document.createTextNode(r)}function G(r,t,e){r.insertBefore(t,e)}function Yt(r,t){r.removeChild(t)}function $t(r,t){r.appendChild(t)}function me(r){return r.parentNode}function xe(r){return r.nextSibling}function xt(r,t){r.textContent=t}var Wt=58,Hi=120,Gi=S("","");function St(r){return r===void 0}function A(r){return r!==void 0}function zi(r,t,e){for(var i={},n=t;n<=e;++n){var a=r[n].key;a!==void 0&&(i[a]=n)}return i}function q(r,t){var e=r.key===t.key,i=r.tag===t.tag;return i&&e}function W(r){var t,e=r.children,i=r.tag;if(A(i)){var n=r.elm=le(i);if(Nt(Gi,r),ti(e))for(t=0;t<e.length;++t){var a=e[t];a!=null&&$t(n,W(a))}else A(r.text)&&!ae(r.text)&&$t(n,Kt(r.text))}else r.elm=Kt(r.text);return r.elm}function be(r,t,e,i,n){for(;i<=n;++i){var a=e[i];a!=null&&G(r,W(a),t)}}function ut(r,t,e,i){for(;e<=i;++e){var n=t[e];if(n!=null)if(A(n.tag)){var a=me(n.elm);Yt(a,n.elm)}else Yt(r,n.elm)}}function Nt(r,t){var e,i=t.elm,n=r&&r.attrs||{},a=t.attrs||{};if(n!==a){for(e in a){var s=a[e],f=n[e];f!==s&&(s===!0?i.setAttribute(e,""):s===!1?i.removeAttribute(e):e.charCodeAt(0)!==Hi?i.setAttribute(e,s):e==="xmlns:xlink"||e==="xmlns"?i.setAttributeNS(wi,e,s):e.charCodeAt(3)===Wt?i.setAttributeNS(Li,e,s):e.charCodeAt(5)===Wt?i.setAttributeNS(ue,e,s):i.setAttribute(e,s))}for(e in n)e in a||i.removeAttribute(e)}}function Fi(r,t,e){for(var i=0,n=0,a=t.length-1,s=t[0],f=t[a],o=e.length-1,v=e[0],u=e[o],h,l,c,_;i<=a&&n<=o;)s==null?s=t[++i]:f==null?f=t[--a]:v==null?v=e[++n]:u==null?u=e[--o]:q(s,v)?(F(s,v),s=t[++i],v=e[++n]):q(f,u)?(F(f,u),f=t[--a],u=e[--o]):q(s,u)?(F(s,u),G(r,s.elm,xe(f.elm)),s=t[++i],u=e[--o]):q(f,v)?(F(f,v),G(r,f.elm,s.elm),f=t[--a],v=e[++n]):(St(h)&&(h=zi(t,i,a)),l=h[v.key],St(l)?G(r,W(v),s.elm):(c=t[l],c.tag!==v.tag?G(r,W(v),s.elm):(F(c,v),t[l]=void 0,G(r,c.elm,s.elm))),v=e[++n]);(i<=a||n<=o)&&(i>a?(_=e[o+1]==null?null:e[o+1].elm,be(r,_,e,n,o)):ut(r,t,i,a))}function F(r,t){var e=t.elm=r.elm,i=r.children,n=t.children;r!==t&&(Nt(r,t),St(t.text)?A(i)&&A(n)?i!==n&&Fi(e,i,n):A(n)?(A(r.text)&&xt(e,""),be(e,null,n,0,n.length-1)):A(i)?ut(e,i,0,i.length-1):A(r.text)&&xt(e,""):r.text!==t.text&&(A(i)&&ut(e,i,0,i.length-1),xt(e,t.text)))}function Ui(r,t){if(q(r,t))F(r,t);else{var e=r.elm,i=me(e);W(t),i!==null&&(G(i,t.elm,xe(e)),ut(i,[r],0,0))}return t}var ji=0,qi=function(){function r(t,e,i){if(this.type="svg",this.refreshHover=Jt(),this.configLayer=Jt(),this.storage=e,this._opts=i=Y({},i),this.root=t,this._id="zr"+ji++,this._oldVNode=zt(i.width,i.height),t&&!i.ssr){var n=this._viewport=document.createElement("div");n.style.cssText="position:relative;overflow:hidden";var a=this._svgDom=this._oldVNode.elm=le("svg");Nt(null,this._oldVNode),n.appendChild(a),t.appendChild(n)}this.resize(i.width,i.height)}return r.prototype.getType=function(){return this.type},r.prototype.getViewportRoot=function(){return this._viewport},r.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},r.prototype.getSvgDom=function(){return this._svgDom},r.prototype.refresh=function(){if(this.root){var t=this.renderToVNode({willUpdate:!0});t.attrs.style="position:absolute;left:0;top:0;user-select:none",Ui(this._oldVNode,t),this._oldVNode=t}},r.prototype.renderOneToVNode=function(t){return Xt(t,It(this._id))},r.prototype.renderToVNode=function(t){t=t||{};var e=this.storage.getDisplayList(!0),i=this._width,n=this._height,a=It(this._id);a.animation=t.animation,a.willUpdate=t.willUpdate,a.compress=t.compress;var s=[],f=this._bgVNode=Zi(i,n,this._backgroundColor,a);f&&s.push(f);var o=t.compress?null:this._mainVNode=S("g","main",{},[]);this._paintList(e,a,o?o.children:s),o&&s.push(o);var v=V(B(a.defs),function(l){return a.defs[l]});if(v.length&&s.push(S("defs","defs",{},v)),t.animation){var u=Pi(a.cssNodes,a.cssAnims,{newline:!0});if(u){var h=S("style","stl",{},[],u);s.push(h)}}return zt(i,n,s,t.useViewBox)},r.prototype.renderToString=function(t){return t=t||{},Tt(this.renderToVNode({animation:Z(t.cssAnimation,!0),willUpdate:!1,compress:!0,useViewBox:Z(t.useViewBox,!0)}),{newline:!0})},r.prototype.setBackgroundColor=function(t){this._backgroundColor=t},r.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},r.prototype._paintList=function(t,e,i){for(var n=t.length,a=[],s=0,f,o,v=0,u=0;u<n;u++){var h=t[u];if(!h.invisible){var l=h.__clipPaths,c=l&&l.length||0,_=o&&o.length||0,d=void 0;for(d=Math.max(c-1,_-1);d>=0&&!(l&&o&&l[d]===o[d]);d--);for(var p=_-1;p>d;p--)s--,f=a[s-1];for(var y=d+1;y<c;y++){var g={};Ei(l[y],g,e);var m=S("g","clip-g-"+v++,g,[]);(f?f.children:i).push(m),a[s++]=m,f=m}o=l;var x=Xt(h,e);x&&(f?f.children:i).push(x)}}},r.prototype.resize=function(t,e){var i=this._opts,n=this.root,a=this._viewport;if(t!=null&&(i.width=t),e!=null&&(i.height=e),n&&a&&(a.style.display="none",t=U(n,0,i),e=U(n,1,i),a.style.display=""),this._width!==t||this._height!==e){if(this._width=t,this._height=e,a){var s=a.style;s.width=t+"px",s.height=e+"px"}if(Pt(this._backgroundColor))this.refresh();else{var f=this._svgDom;f&&(f.setAttribute("width",t),f.setAttribute("height",e));var o=this._bgVNode&&this._bgVNode.elm;o&&(o.setAttribute("width",t),o.setAttribute("height",e))}}},r.prototype.getWidth=function(){return this._width},r.prototype.getHeight=function(){return this._height},r.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},r.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},r.prototype.toDataURL=function(t){var e=this.renderToString(),i="data:image/svg+xml;";return t?(e=ei(e),e&&i+"base64,"+e):i+"charset=UTF-8,"+encodeURIComponent(e)},r}();function Jt(r){return function(){}}function Zi(r,t,e,i){var n;if(e&&e!=="none")if(n=S("rect","bg",{width:r,height:t,x:"0",y:"0",id:"0"}),ne(e))ge({fill:e},n.attrs,"fill",i);else if(Pt(e))ye({style:{fill:e},dirty:ii,getBoundingRect:function(){return{width:r,height:t}}},n.attrs,"fill",i);else{var a=K(e),s=a.color,f=a.opacity;n.attrs.fill=s,f<1&&(n.attrs["fill-opacity"]=f)}return n}const Xi=qi;function er(r){r.registerPainter("svg",Xi)}function Qt(r,t,e){var i=ai.createCanvas(),n=t.getWidth(),a=t.getHeight(),s=i.style;return s&&(s.position="absolute",s.left="0",s.top="0",s.width=n+"px",s.height=a+"px",i.setAttribute("data-zr-dom-id",r)),i.width=n*e,i.height=a*e,i}var Ki=function(r){ri(t,r);function t(e,i,n){var a=r.call(this)||this;a.motionBlur=!1,a.lastFrameAlpha=.7,a.dpr=1,a.virtual=!1,a.config={},a.incremental=!1,a.zlevel=0,a.maxRepaintRectCount=5,a.__dirty=!0,a.__firstTimePaint=!0,a.__used=!1,a.__drawIndex=0,a.__startIndex=0,a.__endIndex=0,a.__prevStartIndex=null,a.__prevEndIndex=null;var s;n=n||oe,typeof e=="string"?s=Qt(e,i,n):ae(e)&&(s=e,e=s.id),a.id=e,a.dom=s;var f=s.style;return f&&(se(s),s.onselectstart=function(){return!1},f.padding="0",f.margin="0",f.borderWidth="0"),a.painter=i,a.dpr=n,a}return t.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},t.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},t.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},t.prototype.setUnpainted=function(){this.__firstTimePaint=!0},t.prototype.createBackBuffer=function(){var e=this.dpr;this.domBack=Qt("back-"+this.id,this.painter,e),this.ctxBack=this.domBack.getContext("2d"),e!==1&&this.ctxBack.scale(e,e)},t.prototype.createRepaintRects=function(e,i,n,a){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var s=[],f=this.maxRepaintRectCount,o=!1,v=new st(0,0,0,0);function u(g){if(!(!g.isFinite()||g.isZero()))if(s.length===0){var m=new st(0,0,0,0);m.copy(g),s.push(m)}else{for(var x=!1,C=1/0,N=0,b=0;b<s.length;++b){var I=s[b];if(I.intersect(g)){var P=new st(0,0,0,0);P.copy(I),P.union(g),s[b]=P,x=!0;break}else if(o){v.copy(g),v.union(I);var w=g.width*g.height,R=I.width*I.height,T=v.width*v.height,L=T-w-R;L<C&&(C=L,N=b)}}if(o&&(s[N].union(g),x=!0),!x){var m=new st(0,0,0,0);m.copy(g),s.push(m)}o||(o=s.length>=f)}}for(var h=this.__startIndex;h<this.__endIndex;++h){var l=e[h];if(l){var c=l.shouldBePainted(n,a,!0,!0),_=l.__isRendered&&(l.__dirty&wt||!c)?l.getPrevPaintRect():null;_&&u(_);var d=c&&(l.__dirty&wt||!l.__isRendered)?l.getPaintRect():null;d&&u(d)}}for(var h=this.__prevStartIndex;h<this.__prevEndIndex;++h){var l=i[h],c=l.shouldBePainted(n,a,!0,!0);if(l&&(!c||!l.__zr)&&l.__isRendered){var _=l.getPrevPaintRect();_&&u(_)}}var p;do{p=!1;for(var h=0;h<s.length;){if(s[h].isZero()){s.splice(h,1);continue}for(var y=h+1;y<s.length;)s[h].intersect(s[y])?(p=!0,s[h].union(s[y]),s.splice(y,1)):y++;h++}}while(p);return this._paintRects=s,s},t.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},t.prototype.resize=function(e,i){var n=this.dpr,a=this.dom,s=a.style,f=this.domBack;s&&(s.width=e+"px",s.height=i+"px"),a.width=e*n,a.height=i*n,f&&(f.width=e*n,f.height=i*n,n!==1&&this.ctxBack.scale(n,n))},t.prototype.clear=function(e,i,n){var a=this.dom,s=this.ctx,f=a.width,o=a.height;i=i||this.clearColor;var v=this.motionBlur&&!e,u=this.lastFrameAlpha,h=this.dpr,l=this;v&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(a,0,0,f/h,o/h));var c=this.domBack;function _(d,p,y,g){if(s.clearRect(d,p,y,g),i&&i!=="transparent"){var m=void 0;if(si(i)){var x=i.global||i.__width===y&&i.__height===g;m=x&&i.__canvasGradient||oi(s,i,{x:0,y:0,width:y,height:g}),i.__canvasGradient=m,i.__width=y,i.__height=g}else fi(i)&&(i.scaleX=i.scaleX||h,i.scaleY=i.scaleY||h,m=hi(s,i,{dirty:function(){l.setUnpainted(),l.__painter.refresh()}}));s.save(),s.fillStyle=m||i,s.fillRect(d,p,y,g),s.restore()}v&&(s.save(),s.globalAlpha=u,s.drawImage(c,d,p,y,g),s.restore())}!n||v?_(0,0,f,o):n.length&&vt(n,function(d){_(d.x*h,d.y*h,d.width*h,d.height*h)})},t}(ni);const bt=Ki;var te=1e5,E=314159,ht=.01,Yi=.001;function $i(r){return r?r.__builtin__?!0:!(typeof r.resize!="function"||typeof r.refresh!="function"):!1}function Wi(r,t){var e=document.createElement("div");return e.style.cssText=["position:relative","width:"+r+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",e}var Ji=function(){function r(t,e,i,n){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var a=!t.nodeName||t.nodeName.toUpperCase()==="CANVAS";this._opts=i=Y({},i||{}),this.dpr=i.devicePixelRatio||oe,this._singleCanvas=a,this.root=t;var s=t.style;s&&(se(t),t.innerHTML=""),this.storage=e;var f=this._zlevelList;this._prevDisplayList=[];var o=this._layers;if(a){var u=t,h=u.width,l=u.height;i.width!=null&&(h=i.width),i.height!=null&&(l=i.height),this.dpr=i.devicePixelRatio||1,u.width=h*this.dpr,u.height=l*this.dpr,this._width=h,this._height=l;var c=new bt(u,this,this.dpr);c.__builtin__=!0,c.initContext(),o[E]=c,c.zlevel=E,f.push(E),this._domRoot=t}else{this._width=U(t,0,i),this._height=U(t,1,i);var v=this._domRoot=Wi(this._width,this._height);t.appendChild(v)}}return r.prototype.getType=function(){return"canvas"},r.prototype.isSingleCanvas=function(){return this._singleCanvas},r.prototype.getViewportRoot=function(){return this._domRoot},r.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},r.prototype.refresh=function(t){var e=this.storage.getDisplayList(!0),i=this._prevDisplayList,n=this._zlevelList;this._redrawId=Math.random(),this._paintList(e,i,t,this._redrawId);for(var a=0;a<n.length;a++){var s=n[a],f=this._layers[s];if(!f.__builtin__&&f.refresh){var o=a===0?this._backgroundColor:null;f.refresh(o)}}return this._opts.useDirtyRect&&(this._prevDisplayList=e.slice()),this},r.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},r.prototype._paintHoverList=function(t){var e=t.length,i=this._hoverlayer;if(i&&i.clear(),!!e){for(var n={inHover:!0,viewWidth:this._width,viewHeight:this._height},a,s=0;s<e;s++){var f=t[s];f.__inHover&&(i||(i=this._hoverlayer=this.getLayer(te)),a||(a=i.ctx,a.save()),ot(a,f,n,s===e-1))}a&&a.restore()}},r.prototype.getHoverLayer=function(){return this.getLayer(te)},r.prototype.paintOne=function(t,e){vi(t,e)},r.prototype._paintList=function(t,e,i,n){if(this._redrawId===n){i=i||!1,this._updateLayerStatus(t);var a=this._doPaintList(t,e,i),s=a.finished,f=a.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),f&&this._paintHoverList(t),s)this.eachLayer(function(v){v.afterBrush&&v.afterBrush()});else{var o=this;ui(function(){o._paintList(t,e,i,n)})}}},r.prototype._compositeManually=function(){var t=this.getLayer(E).ctx,e=this._domRoot.width,i=this._domRoot.height;t.clearRect(0,0,e,i),this.eachBuiltinLayer(function(n){n.virtual&&t.drawImage(n.dom,0,0,e,i)})},r.prototype._doPaintList=function(t,e,i){for(var n=this,a=[],s=this._opts.useDirtyRect,f=0;f<this._zlevelList.length;f++){var o=this._zlevelList[f],v=this._layers[o];v.__builtin__&&v!==this._hoverlayer&&(v.__dirty||i)&&a.push(v)}for(var u=!0,h=!1,l=function(d){var p=a[d],y=p.ctx,g=s&&p.createRepaintRects(t,e,c._width,c._height),m=i?p.__startIndex:p.__drawIndex,x=!i&&p.incremental&&Date.now,C=x&&Date.now(),N=p.zlevel===c._zlevelList[0]?c._backgroundColor:null;if(p.__startIndex===p.__endIndex)p.clear(!1,N,g);else if(m===p.__startIndex){var b=t[m];(!b.incremental||!b.notClear||i)&&p.clear(!1,N,g)}m===-1&&(console.error("For some unknown reason. drawIndex is -1"),m=p.__startIndex);var I,P=function(L){var k={inHover:!1,allClipped:!1,prevEl:null,viewWidth:n._width,viewHeight:n._height};for(I=m;I<p.__endIndex;I++){var j=t[I];if(j.__inHover&&(h=!0),n._doPaintEl(j,p,s,L,k,I===p.__endIndex-1),x){var O=Date.now()-C;if(O>15)break}}k.prevElClipPaths&&y.restore()};if(g)if(g.length===0)I=p.__endIndex;else for(var w=c.dpr,R=0;R<g.length;++R){var T=g[R];y.save(),y.beginPath(),y.rect(T.x*w,T.y*w,T.width*w,T.height*w),y.clip(),P(T),y.restore()}else y.save(),P(),y.restore();p.__drawIndex=I,p.__drawIndex<p.__endIndex&&(u=!1)},c=this,_=0;_<a.length;_++)l(_);return li.wxa&&vt(this._layers,function(d){d&&d.ctx&&d.ctx.draw&&d.ctx.draw()}),{finished:u,needsRefreshHover:h}},r.prototype._doPaintEl=function(t,e,i,n,a,s){var f=e.ctx;if(i){var o=t.getPaintRect();(!n||o&&o.intersect(n))&&(ot(f,t,a,s),t.setPrevPaintRect(o))}else ot(f,t,a,s)},r.prototype.getLayer=function(t,e){this._singleCanvas&&!this._needsManuallyCompositing&&(t=E);var i=this._layers[t];return i||(i=new bt("zr_"+t,this,this.dpr),i.zlevel=t,i.__builtin__=!0,this._layerConfig[t]?ft(i,this._layerConfig[t],!0):this._layerConfig[t-ht]&&ft(i,this._layerConfig[t-ht],!0),e&&(i.virtual=e),this.insertLayer(t,i),i.initContext()),i},r.prototype.insertLayer=function(t,e){var i=this._layers,n=this._zlevelList,a=n.length,s=this._domRoot,f=null,o=-1;if(!i[t]&&$i(e)){if(a>0&&t>n[0]){for(o=0;o<a-1&&!(n[o]<t&&n[o+1]>t);o++);f=i[n[o]]}if(n.splice(o+1,0,t),i[t]=e,!e.virtual)if(f){var v=f.dom;v.nextSibling?s.insertBefore(e.dom,v.nextSibling):s.appendChild(e.dom)}else s.firstChild?s.insertBefore(e.dom,s.firstChild):s.appendChild(e.dom);e.__painter=this}},r.prototype.eachLayer=function(t,e){for(var i=this._zlevelList,n=0;n<i.length;n++){var a=i[n];t.call(e,this._layers[a],a)}},r.prototype.eachBuiltinLayer=function(t,e){for(var i=this._zlevelList,n=0;n<i.length;n++){var a=i[n],s=this._layers[a];s.__builtin__&&t.call(e,s,a)}},r.prototype.eachOtherLayer=function(t,e){for(var i=this._zlevelList,n=0;n<i.length;n++){var a=i[n],s=this._layers[a];s.__builtin__||t.call(e,s,a)}},r.prototype.getLayers=function(){return this._layers},r.prototype._updateLayerStatus=function(t){this.eachBuiltinLayer(function(h,l){h.__dirty=h.__used=!1});function e(h){a&&(a.__endIndex!==h&&(a.__dirty=!0),a.__endIndex=h)}if(this._singleCanvas)for(var i=1;i<t.length;i++){var n=t[i];if(n.zlevel!==t[i-1].zlevel||n.incremental){this._needsManuallyCompositing=!0;break}}var a=null,s=0,f,o;for(o=0;o<t.length;o++){var n=t[o],v=n.zlevel,u=void 0;f!==v&&(f=v,s=0),n.incremental?(u=this.getLayer(v+Yi,this._needsManuallyCompositing),u.incremental=!0,s=1):u=this.getLayer(v+(s>0?ht:0),this._needsManuallyCompositing),u.__builtin__||di("ZLevel "+v+" has been used by unkown layer "+u.id),u!==a&&(u.__used=!0,u.__startIndex!==o&&(u.__dirty=!0),u.__startIndex=o,u.incremental?u.__drawIndex=-1:u.__drawIndex=o,e(o),a=u),n.__dirty&wt&&!n.__inHover&&(u.__dirty=!0,u.incremental&&u.__drawIndex<0&&(u.__drawIndex=o))}e(o),this.eachBuiltinLayer(function(h,l){!h.__used&&h.getElementCount()>0&&(h.__dirty=!0,h.__startIndex=h.__endIndex=h.__drawIndex=0),h.__dirty&&h.__drawIndex<0&&(h.__drawIndex=h.__startIndex)})},r.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},r.prototype._clearLayer=function(t){t.clear()},r.prototype.setBackgroundColor=function(t){this._backgroundColor=t,vt(this._layers,function(e){e.setUnpainted()})},r.prototype.configLayer=function(t,e){if(e){var i=this._layerConfig;i[t]?ft(i[t],e,!0):i[t]=e;for(var n=0;n<this._zlevelList.length;n++){var a=this._zlevelList[n];if(a===t||a===t+ht){var s=this._layers[a];ft(s,i[t],!0)}}}},r.prototype.delLayer=function(t){var e=this._layers,i=this._zlevelList,n=e[t];n&&(n.dom.parentNode.removeChild(n.dom),delete e[t],i.splice(ci(i,t),1))},r.prototype.resize=function(t,e){if(this._domRoot.style){var i=this._domRoot;i.style.display="none";var n=this._opts,a=this.root;if(t!=null&&(n.width=t),e!=null&&(n.height=e),t=U(a,0,n),e=U(a,1,n),i.style.display="",this._width!==t||e!==this._height){i.style.width=t+"px",i.style.height=e+"px";for(var s in this._layers)this._layers.hasOwnProperty(s)&&this._layers[s].resize(t,e);this.refresh(!0)}this._width=t,this._height=e}else{if(t==null||e==null)return;this._width=t,this._height=e,this.getLayer(E).resize(t,e)}return this},r.prototype.clearLayer=function(t){var e=this._layers[t];e&&e.clear()},r.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},r.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[E].dom;var e=new bt("image",this,t.pixelRatio||this.dpr);e.initContext(),e.clear(!1,t.backgroundColor||this._backgroundColor);var i=e.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var n=e.dom.width,a=e.dom.height;this.eachLayer(function(h){h.__builtin__?i.drawImage(h.dom,0,0,n,a):h.renderToCanvas&&(i.save(),h.renderToCanvas(i),i.restore())})}else for(var s={inHover:!1,viewWidth:this._width,viewHeight:this._height},f=this.storage.getDisplayList(!0),o=0,v=f.length;o<v;o++){var u=f[o];ot(i,u,s,o===v-1)}return e.dom},r.prototype.getWidth=function(){return this._width},r.prototype.getHeight=function(){return this._height},r}();const Qi=Ji;function ir(r){r.registerPainter("canvas",Qi)}export{ir as CanvasRenderer,er as SVGRenderer};
